# RBAC权限管理系统演示

## 系统概述

本系统实现了完整的基于角色的访问控制（RBAC）权限管理，提供了灵活、安全、易用的权限控制机制。

## 核心功能

### 1. 权限管理
- **权限定义**：系统预定义了完整的权限体系
- **权限分类**：按功能模块分类管理权限
- **权限继承**：支持权限级别和继承机制

### 2. 角色管理
- **系统角色**：预定义的系统角色（超级管理员、管理员、经理、普通用户、访客）
- **自定义角色**：支持创建自定义角色
- **角色级别**：数字化的权限级别控制
- **角色状态**：支持启用/禁用角色

### 3. 用户角色分配
- **多角色支持**：用户可以拥有多个角色
- **权限合并**：自动合并多个角色的权限
- **实时生效**：角色变更立即生效
- **可视化分配**：直观的角色分配界面

### 4. 权限检查
- **组件级权限**：支持组件级别的权限控制
- **路由保护**：基于权限的路由访问控制
- **动态权限**：运行时动态权限检查
- **权限提示**：友好的权限不足提示

## 权限体系设计

### 权限级别
- **1-20**：普通用户级别
- **21-60**：经理级别
- **61-80**：管理员级别
- **81-99**：超级管理员级别

### 系统权限
```typescript
// 用户管理权限
user:create    // 创建用户
user:read      // 查看用户
user:update    // 编辑用户
user:delete    // 删除用户
user:manage    // 完整用户管理

// 角色权限管理
role:create    // 创建角色
role:read      // 查看角色
role:update    // 编辑角色
role:delete    // 删除角色

// 权限管理
permission:manage  // 权限管理

// 个人中心
profile:update     // 更新个人资料

// 系统设置
settings:manage    // 系统设置

// 仪表盘
dashboard:read     // 查看仪表盘

// 系统管理
system:manage      // 系统管理
```

### 系统角色
1. **超级管理员** (level: 100)
   - 拥有所有系统权限
   - 不可删除和修改

2. **管理员** (level: 80)
   - 除系统管理外的所有权限
   - 可以管理用户和角色

3. **经理** (level: 60)
   - 用户查看和编辑权限
   - 仪表盘访问权限
   - 个人资料和系统设置权限

4. **普通用户** (level: 20)
   - 仪表盘查看权限
   - 个人资料更新权限

5. **访客** (level: 10)
   - 仅有仪表盘查看权限

## 技术实现

### 1. 类型定义
```typescript
// 权限定义
interface Permission {
  id: string;
  name: string;
  code: string;
  resource: ResourceType;
  action: PermissionAction;
  description: string;
  category: string;
  isSystem: boolean;
}

// 角色定义
interface Role {
  id: string;
  name: string;
  code: string;
  description: string;
  level: number;
  permissions: Permission[];
  userCount: number;
  isSystem: boolean;
  isActive: boolean;
}
```

### 2. 权限检查组件
```typescript
// 权限检查组件
<PermissionChecker 
  requiredPermissions={['user:manage']}
  requiredRoles={['admin']}
  mode="all" // all | any
>
  <UserManagement />
</PermissionChecker>

// 路由保护
<ProtectedRoute requiredPermissions={['permission:manage']}>
  <PermissionManagement />
</ProtectedRoute>
```

### 3. 权限服务
- **权限查询**：获取权限列表和权限树
- **角色管理**：CRUD操作和权限分配
- **权限检查**：运行时权限验证
- **审计日志**：权限操作记录

### 4. 状态管理
- **Zustand**：轻量级状态管理
- **React Query**：数据获取和缓存
- **持久化**：权限状态本地存储

## 用户界面

### 1. 权限管理页面
- **统计卡片**：权限和角色数量统计
- **角色管理**：角色列表、创建、编辑、删除
- **权限列表**：系统权限查看
- **审计日志**：权限操作历史

### 2. 角色分配界面
- **用户信息**：显示用户基本信息
- **当前角色**：显示用户当前角色
- **角色选择**：多选角色分配
- **权限预览**：实时显示选中角色的权限

### 3. 权限分配界面
- **权限树**：按分类显示权限树
- **批量选择**：支持批量权限分配
- **实时预览**：显示选中的权限详情

## 安全特性

### 1. 权限验证
- **前端验证**：UI层权限控制
- **后端验证**：API层权限检查
- **双重保护**：前后端权限一致性

### 2. 角色保护
- **系统角色保护**：系统角色不可删除
- **级联检查**：删除角色前检查用户关联
- **权限级别控制**：高级别角色权限保护

### 3. 操作审计
- **操作记录**：记录所有权限操作
- **操作者追踪**：记录操作人信息
- **时间戳**：精确的操作时间记录

## 最佳实践

### 1. 权限设计
- **最小权限原则**：用户只获得必需的权限
- **权限分离**：不同功能使用不同权限
- **权限组合**：通过角色组合实现复杂权限

### 2. 角色管理
- **角色命名**：使用清晰的角色名称
- **权限级别**：合理设置权限级别
- **角色描述**：详细的角色功能描述

### 3. 用户体验
- **权限提示**：友好的权限不足提示
- **操作引导**：清晰的操作流程指引
- **实时反馈**：即时的操作结果反馈

## 演示账户

### 管理员账户
- **用户名**：admin
- **密码**：123456
- **权限**：除系统管理外的所有权限
- **功能**：可以访问权限管理页面

### 经理账户
- **用户名**：manager
- **密码**：123456
- **权限**：用户查看、编辑权限
- **功能**：可以查看用户列表，无法访问权限管理

### 普通用户账户
- **用户名**：user1
- **密码**：123456
- **权限**：基本查看权限
- **功能**：只能访问仪表盘和个人资料

## 功能演示

### 1. 权限管理演示
1. 使用admin账户登录
2. 访问"权限管理"页面
3. 查看系统权限列表
4. 创建自定义角色
5. 为角色分配权限
6. 查看审计日志

### 2. 用户角色分配演示
1. 在用户管理页面选择用户
2. 点击"分配角色"按钮
3. 选择多个角色
4. 查看权限预览
5. 保存角色分配

### 3. 权限控制演示
1. 使用不同权限级别的账户登录
2. 观察菜单和功能的可见性
3. 尝试访问无权限的页面
4. 查看权限不足提示

## 扩展功能

### 1. 数据权限
- **部门权限**：基于部门的数据访问控制
- **个人权限**：个人数据访问权限
- **字段权限**：字段级别的访问控制

### 2. 时间权限
- **有效期控制**：角色分配有效期
- **时间段权限**：特定时间段的权限控制
- **临时权限**：临时权限分配

### 3. 条件权限
- **IP限制**：基于IP的访问控制
- **设备限制**：设备类型访问控制
- **地理位置**：基于地理位置的权限控制

## 总结

本RBAC权限管理系统提供了完整、灵活、安全的权限控制解决方案，支持：

- ✅ 完整的权限体系设计
- ✅ 灵活的角色管理机制
- ✅ 直观的用户界面
- ✅ 强大的权限检查功能
- ✅ 详细的操作审计
- ✅ 良好的用户体验
- ✅ 可扩展的架构设计

系统适用于各种规模的企业应用，可以根据具体需求进行定制和扩展。 
